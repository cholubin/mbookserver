<div id="content_header" class="sub_upload">
	<h2 class="sub_title">mBook 등록</h2>
</div>
<div id="content">
	<div id="upload_form" >
		<% form_for @mbook, :html => {:multipart => true} do |f| %>
		<input type="hidden" name="sub1" id="sub1" value="">
		<input type="hidden" name="sub2" id="sub2" value="">
		<table>
			<tr class="category1">
				<td class="input_name" style="width:160px;">분류 (필수)</td>
				<td class="input_data">
					<span id="select_category">
						<select id="select_category_0"  class="select_category" level="0" mode="main">
							<option value="">카테고리 선택</option>
							<%@categories.each do |cat| %>
							<option value="<%= cat.id %>" ><%= cat.name %></option>
							<%end %>
						</select>
					</span>
				</td>
				<td class="error"><!-- <img src="/images/icon_error.png" alt="error"> 분류를 선택하세요. --></td>
			</tr>
			<tr class="category2">
				<td class="input_name">분류 (선택)</td>
				<td class="input_data">
					<span id="select_category2">
						<select id="select_category2_0"  class="select_category" level="0" mode="opt">
							<option value="">선택안함</option>
							<%@categories.each do |cat| %>
							<option value="<%= cat.id %>" ><%= cat.name %></option>
							<%end %>
						</select>
					</span>
				</td>
				<td class="error"></td>
			</tr>
			<tr class="bookdate">
				<td class="input_name">발행일</td>
				<td class="input_data">
					<input type="text" id="issue_date" name="issue_date" value="<%= Date.today.to_s %>"><img id="btn_issue_date" src="/images/bt/bt_date.png" alt="발행일 선택" style="cursor:pointer;">
				</td>
				<td class="error"><!-- <img src="/images/icon_error.png" alt="error"> 발행일을 선택하세요. --></td>
			</tr>
			<tr class="price_android">
				<td class="input_name">안드로이드 가격</td>
				<td class="input_data">
					<img src="/images/icon_won.png" alt="원화">
					<input id="price_android" name="price_android" type="text" value="">
				</td>
				<td class="error"><span id="price_msg"></span></td>
			</tr>
			<tr class="price_ipad">
				<td class="input_name" >아이패드 가격</td>
				<td  colspan="2" style="width:540px;">
					<img src="/images/icon_dollar.png" alt="달러">
					<input id="price_android" name="price_android" type="text" value="">
					<input id="btn_view" type="button" value="보기">
					<div id="price_list" style="display:none;width:440px;">
					<table style="margin:10px 0 0 0;width:440px;border-top:0px solid gray;border-bottom:0px solid gray;">
						<tr>
							<td><input type="radio" class="btn_radio" name="usdollor" value="0.99"></td>
							<td>0.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="1.99"></td>
							<td>1.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="2.99"></td>
							<td>2.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="3.99"></td>
							<td>3.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="4.99"></td>
							<td>4.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="5.99"></td>
							<td>5.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="6.99"></td>
							<td>6.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="7.99"></td>
							<td>7.99</td>
						</tr>
						<tr>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="8.99"></td>
							<td>8.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="9.99"></td>
							<td>9.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="10.99"></td>
							<td>10.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="11.99"></td>
							<td>11.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="12.99"></td>
							<td>12.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="13.99"></td>
							<td>13.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="14.99"></td>
							<td>14.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="15.99"></td>
							<td>15.99</td>
						</tr>
						<tr>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="16.99"></td>
							<td>16.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="17.99"></td>
							<td>17.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="18.99"></td>
							<td>18.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="19.99"></td>
							<td>19.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="20.99"></td>
							<td>20.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="21.99"></td>
							<td>21.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="22.99"></td>
							<td>22.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="23.99"></td>
							<td>23.99</td>
						</tr>
						<tr>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="24.99"></td>
							<td>24.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="25.99"></td>
							<td>25.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="26.99"></td>
							<td>26.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="27.99"></td>
							<td>27.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="28.99"></td>
							<td>28.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="29.99"></td>
							<td>29.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="30.99"></td>
							<td>30.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="31.99"></td>
							<td>31.99</td>
						</tr>
						<tr>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="32.99"></td>
							<td>32.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="33.99"></td>
							<td>33.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="34.99"></td>
							<td>34.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="35.99"></td>
							<td>35.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="36.99"></td>
							<td>36.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="37.99"></td>
							<td>37.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="38.99"></td>
							<td>38.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="39.99"></td>
							<td>39.99</td>
						</tr>
						<tr>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="40.99"></td>
							<td>40.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="41.99"></td>
							<td>41.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="42.99"></td>
							<td>42.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="43.99"></td>
							<td>43.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="44.99"></td>
							<td>44.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="45.99"></td>
							<td>45.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="46.99"></td>
							<td>46.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="47.99"></td>
							<td>47.99</td>
						</tr>
						<tr>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="48.99"></td>
							<td>48.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="49.99"></td>
							<td>49.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="54.99"></td>
							<td>54.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="59.99"></td>
							<td>59.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="64.99"></td>
							<td>64.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="69.99"></td>
							<td>69.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="74.99"></td>
							<td>74.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="79.99"></td>
							<td>79.99</td>
						</tr>
						<tr>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="84.99"></td>
							<td>84.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="89.99"></td>
							<td>89.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="94.99"></td>
							<td>94.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="99.99"></td>
							<td>99.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="109.99"></td>
							<td>109.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="119.99"></td>
							<td>119.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="129.99"></td>
							<td>129.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="139.99"></td>
							<td>139.99</td>
						</tr>
						<tr>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="149.99"></td>
							<td>149.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="159.99"></td>
							<td>159.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="169.99"></td>
							<td>169.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="179.99"></td>
							<td>179.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="189.99"></td>
							<td>189.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="199.99"></td>
							<td>199.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="209.99"></td>
							<td>209.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="219.99"></td>
							<td>219.99</td>
						</tr>
						<tr>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="229.99"></td>
							<td>229.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="239.99"></td>
							<td>239.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="249.99"></td>
							<td>249.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="299.99"></td>
							<td>299.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="349.99"></td>
							<td>349.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="399.99"></td>
							<td>399.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="449.99"></td>
							<td>449.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="599.99"></td>
							<td>599.99</td>
						</tr>
						<tr>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="699.99"></td>
							<td>699.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="799.99"></td>
							<td>799.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="899.99"></td>
							<td>899.99</td>
							<td ><input type="radio" class="btn_radio" name="usdollor" value="999.99"></td>
							<td colspan="5">999.99</td>
						</tr>
					</table>
					</div>
				</td>
			</tr>
			
			<!-- <tr class="price_ipad_usdollor" style="hieght:0;">
				<td class="input_name">아이패드 가격</td>
				<td class="input_data" colspan="2" >
				
				</td>
			</tr> -->
			
			<tr class="mbookzip">
				<td class="input_name">mBook Zip 파일</td>
				<td class="input_data">
					<img src="/images/bt/bt_mbook.png" alt="mBook Zip 파일 등록"><input type="file" name="mbook_file" id="mbook_file">	
				</td>
				<td><span class="input_info">※ Zip 파일 최대 용량 : 000MB</span></td>
			</tr>
		</table>
		<p>
			<input type="image" id="submit_btn" src="/images/bt/bt_upload_ok.png" alt="등록완료">
			<!-- <img src="/images/bt/bt_cancel.png" alt="취소"> -->
		</p>	
		<%end %>
	</div>
</div>





<script language="Javascript">
$('.select_category').live("change", function(){
	var $level = $(this).attr("level");
	var $category_id = $(this).val();
	var $mode = $(this).attr("mode");
	
		$.ajax({
			data:'category_id='+ $category_id + '&level=' + $level + '&mode=' + $mode, 
			dataType:'script', 
			type:'post', 
			url:'/mbooks/fetch_subcategories'
		});
})
$('.btn_radio').live("click", function(){
	alert($(this).val();)
})

$('#btn_view').click(function(){
	$('#price_list').css("display", "block");
})

$('#submit_btn').click(function(){
	var $category1_level = $('#select_category select').length -1;
	var $category2_level = $('#select_category2 select').length -1;
	
	if ( $('#select_category_'+ $category1_level ).val() == ""){
		alert("필수 카테고리를 선택해 주세요!");
		return false;
	}else{
		$('#sub1').val( $('#select_category_'+ $category1_level ).val() );
	}
	
	$('#sub2').val( $('#select_category2_'+ $category2_level ).val() );
	
	if( $('#issue_date').val() == ""){
		alert("발행일을 선택해주세요~");
		return false;
	}
	if($('#price').val() == ""){
		$('#price').focus();
		$('#price').css("background-color", "yellow");
		$('#price_msg').html("<img src='/images/icon_error.png' alt='error'> 가격을 입력하세요.");
		return false;
	}
	if( $('#mbook_file').val() == ""){
		alert("업로드할 파일을 선택해주세요!");
		return false;
	}
	
	loadingView();
})

$('#btn_issue_date').live("click", function(){
	$( "#issue_date" ).focus();
})

$(function(){
	$( "#issue_date" ).datepicker();
	$( "#issue_date" ).datepicker( "option", "dateFormat", "yy-mm-dd" );
	$( "#issue_date" ).datepicker( $.datepicker.regional[ "ko" ] );
})	
</script>